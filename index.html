<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Field Nine OS â€” Infrastructure</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Noto+Sans+KR:wght@400;500;600;700&display=swap" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="app">
    <nav class="nav">
      <div class="nav-brand">
        <span class="logo">âš¡</span>
        <span>Field Nine OS</span>
      </div>
      <div class="nav-right">
        <span class="global-dot" id="globalDot"></span>
        <button class="btn-refresh" id="refreshBtn" title="ìƒˆë¡œê³ ì¹¨">â†»</button>
      </div>
    </nav>

    <header class="header">
      <h1>Infrastructure Status</h1>
      <p class="header-sub" id="lastUpdated">ì‹œìŠ¤í…œ ìƒíƒœë¥¼ í™•ì¸í•˜ëŠ” ì¤‘...</p>
    </header>

    <section class="services" id="services">
      <div class="service-card" id="card-github">
        <div class="service-header">
          <span class="service-icon">ğŸ™</span>
          <span class="service-name">GitHub</span>
          <span class="service-badge" id="badge-github">í™•ì¸ ì¤‘...</span>
        </div>
        <div class="service-body" id="body-github">
          <div class="skeleton skeleton-line"></div>
          <div class="skeleton skeleton-line short"></div>
          <div class="skeleton skeleton-line"></div>
        </div>
      </div>

      <div class="service-card" id="card-vercel">
        <div class="service-header">
          <span class="service-icon">â–²</span>
          <span class="service-name">Vercel</span>
          <span class="service-badge" id="badge-vercel">í™•ì¸ ì¤‘...</span>
        </div>
        <div class="service-body" id="body-vercel">
          <div class="skeleton skeleton-line"></div>
          <div class="skeleton skeleton-line short"></div>
          <div class="skeleton skeleton-line"></div>
        </div>
      </div>

      <div class="service-card" id="card-supabase">
        <div class="service-header">
          <span class="service-icon">ğŸ—„ï¸</span>
          <span class="service-name">Supabase</span>
          <span class="service-badge" id="badge-supabase">í™•ì¸ ì¤‘...</span>
        </div>
        <div class="service-body" id="body-supabase">
          <div class="skeleton skeleton-line"></div>
          <div class="skeleton skeleton-line short"></div>
          <div class="skeleton skeleton-line"></div>
        </div>
      </div>

      <div class="service-card" id="card-cloudflare">
        <div class="service-header">
          <span class="service-icon">â˜ï¸</span>
          <span class="service-name">Cloudflare</span>
          <span class="service-badge" id="badge-cloudflare">í™•ì¸ ì¤‘...</span>
        </div>
        <div class="service-body" id="body-cloudflare">
          <div class="skeleton skeleton-line"></div>
          <div class="skeleton skeleton-line short"></div>
          <div class="skeleton skeleton-line"></div>
        </div>
      </div>
    </section>

    <section class="commits-section" id="commitsSection" style="display: none;">
      <h3>ìµœê·¼ í™œë™</h3>
      <div class="commits-list" id="commitsList"></div>
    </section>
  </div>

  <script>
    // ëª¨ë“  ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì¸ë¼ì¸ìœ¼ë¡œ í†µí•©í•˜ì—¬ ë¡œë”© ë¬¸ì œ í•´ê²°
    var INFRA_CONFIG = {
      refreshInterval: 30000,
      mockData: {
        github: {
          connected: true,
          status: 'operational',
          repo: 'field-nine/dashboard',
          branch: 'main',
          lastCommit: '2ë¶„ ì „'
        },
        vercel: {
          connected: true,
          status: 'ready',
          deployments: 12,
          lastDeploy: '5ë¶„ ì „',
          domain: 'field9-dashboard.vercel.app'
        },
        supabase: {
          connected: true,
          status: 'active',
          database: 'field9-prod',
          connections: 23,
          storage: '2.1 GB'
        },
        cloudflare: {
          connected: true,
          status: 'active',
          requests: '1.2M/ì¼',
          bandwidth: '45.2 GB',
          cache: '94%'
        }
      }
    };

    function createStatRow(label, value) {
      return '<div class="stat-row">' +
        '<span class="stat-label">' + label + '</span>' +
        '<span class="stat-value">' + value + '</span>' +
        '</div>';
    }

    function setBadgeStatus(badge, status) {
      var statusMap = {
        'operational': { text: 'ì •ìƒ ìš´ì˜', class: 'ok' },
        'ready': { text: 'ì¤€ë¹„ ì™„ë£Œ', class: 'ok' },
        'active': { text: 'í™œì„±', class: 'ok' }
      };
      
      var config = statusMap[status] || { text: 'ì˜¤ë¥˜', class: 'error' };
      badge.textContent = config.text;
      badge.className = 'service-badge ' + config.class;
    }

    function updateServiceCard(service, data) {
      var badge = document.getElementById('badge-' + service);
      var body = document.getElementById('body-' + service);
      
      if (!badge || !body || !data) return;
      
      setBadgeStatus(badge, data.status);
      
      var html = '';
      if (service === 'github') {
        html = createStatRow('ì €ì¥ì†Œ', data.repo) +
               createStatRow('ë¸Œëœì¹˜', data.branch) +
               createStatRow('ë§ˆì§€ë§‰ ì»¤ë°‹', data.lastCommit);
      } else if (service === 'vercel') {
        html = createStatRow('ë„ë©”ì¸', data.domain) +
               createStatRow('ë°°í¬ ìˆ˜', data.deployments + 'ê°œ') +
               createStatRow('ë§ˆì§€ë§‰ ë°°í¬', data.lastDeploy);
      } else if (service === 'supabase') {
        html = createStatRow('ë°ì´í„°ë² ì´ìŠ¤', data.database) +
               createStatRow('í™œì„± ì—°ê²°', data.connections + 'ê°œ') +
               createStatRow('ìŠ¤í† ë¦¬ì§€', data.storage);
      } else if (service === 'cloudflare') {
        html = createStatRow('ìš”ì²­ ìˆ˜', data.requests) +
               createStatRow('ëŒ€ì—­í­', data.bandwidth) +
               createStatRow('ìºì‹œ ì ì¤‘ë¥ ', data.cache);
      }
      
      body.innerHTML = html;
    }

    function updateGlobalStatus() {
      var globalDot = document.getElementById('globalDot');
      if (globalDot) {
        globalDot.className = 'global-dot ok';
      }
    }

    function fetchServiceStatus() {
      var refreshBtn = document.getElementById('refreshBtn');
      var lastUpdated = document.getElementById('lastUpdated');
      
      if (refreshBtn) refreshBtn.classList.add('spinning');
      if (lastUpdated) lastUpdated.textContent = 'ì—…ë°ì´íŠ¸ ì¤‘...';
      
      setTimeout(function() {
        var data = INFRA_CONFIG.mockData;
        var services = ['github', 'vercel', 'supabase', 'cloudflare'];
        
        services.forEach(function(service) {
          updateServiceCard(service, data[service]);
        });
        
        updateGlobalStatus();
        
        if (lastUpdated) {
          lastUpdated.textContent = 'ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸: ' + new Date().toLocaleTimeString('ko-KR');
        }
        if (refreshBtn) refreshBtn.classList.remove('spinning');
        
      }, 1000);
    }

    document.addEventListener('DOMContentLoaded', function() {
      var refreshBtn = document.getElementById('refreshBtn');
      
      if (refreshBtn) {
        refreshBtn.addEventListener('click', fetchServiceStatus);
      }

      fetchServiceStatus();
      setInterval(fetchServiceStatus, INFRA_CONFIG.refreshInterval);
    });
  </script>
</body>
</html>